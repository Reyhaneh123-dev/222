<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù†Ù…Ø§ÛŒØ´Ú¯Ø§Ù‡ Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÙ‡Ø§ â€” ØªØ¹Ø±ÛŒÙ Ù…Ø¬Ù…ÙˆØ¹Ù‡</title>

<style>
  :root{
    --blue:#1565c0;
    --light:#f4fbff;
    --muted:#6b7280;
  }

  *{box-sizing:border-box}
  body{
    margin:0;
    padding:16px;
    font-family:"Tahoma",sans-serif;
    background:var(--light);
  }

  header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:18px;
  }

  .avatar{
    width:48px; height:48px;
    background:var(--blue);
    color:white;
    border-radius:50%;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:19px;
    font-weight:700;
  }

  main{
    max-width:1200px;
    margin:0 auto;
    display:grid;
    grid-template-columns:380px 1fr;
    gap:18px;
  }

  .card{
    background:white;
    border-radius:12px;
    padding:14px;
    box-shadow:0 6px 20px rgba(0,0,0,0.07);
  }

  label{font-weight:700; margin-top:10px; display:block;}
  select,input{padding:8px; border-radius:8px; border:1px solid #ddd; width:100%; font-size:15px;}
  button{padding:10px; border:0; border-radius:8px; background:var(--blue); color:white; font-size:15px; cursor:pointer;}

  .small{color:var(--muted); font-size:13px;}

  .vis-area{
    display:flex;
    flex-direction:column;
    gap:14px;
    height:580px;
  }

  canvas{
    width:100%;
    height:230px;
    border:1px solid #e0e0e0;
    border-radius:10px;
    background:white;
  }

  .op-strip{
    display:flex;
    gap:10px;
    justify-content:flex-end;
  }

  .op{
    padding:8px 12px;
    border-radius:8px;
    background:#eef3ff;
    border:1px solid #dbe4ff;
    font-size:18px;
    transition:0.2s;
  }
  .op.active{
    background:#fff4d8;
    transform:translateY(-4px);
    box-shadow:0 6px 16px rgba(0,0,0,0.12);
  }

  .result-box{
    background:white;
    padding:10px;
    border-radius:10px;
    min-height:40px;
    font-size:15px;
    box-shadow:inset 0 0 0 1px #eee;
  }

  .examples{
    margin-top:8px;
    max-height:150px;
    overflow-y:auto;
    font-size:14px;
    background:#fafcff;
    padding:8px;
    border-radius:8px;
    border:1px solid #e0e0e0;
  }
</style>
</head>
<body>

<header>
  <h2 style="margin:0">Ù†Ù…Ø§ÛŒØ´Ú¯Ø§Ù‡ Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÙ‡Ø§ â€” ØªØ¹Ø±ÛŒÙ</h2>

  <div style="display:flex;gap:10px;align-items:center;">
    <div id="userNameText" class="small"></div>
    <div id="avatar" class="avatar"></div>
  </div>
</header>

<main>

  <!-- ğŸ‘ˆ Ø³ØªÙˆÙ† ØªØ¹Ø±ÛŒÙ Ù…Ø¬Ù…ÙˆØ¹Ù‡ -->
  <div class="card">

    <label>Ø§Ù†ØªØ®Ø§Ø¨ Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ø¬Ù‡Ø§Ù†ÛŒ (Ø´Ù†Ø§Ø®ØªÙ‡â€ŒØ´Ø¯Ù‡)</label>
    <select id="knownSet">
      <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯...</option>
      <option value="N">N â€” Ø§Ø¹Ø¯Ø§Ø¯ Ø·Ø¨ÛŒØ¹ÛŒ (Û±Ù¬Û²Ù¬Û³Ù¬â€¦)</option>
      <option value="W">W â€” Ø§Ø¹Ø¯Ø§Ø¯ Ø­Ø³Ø§Ø¨ÛŒ (Û°Ù¬Û±Ù¬Û²Ù¬â€¦)</option>
      <option value="Z">Z â€” Ø§Ø¹Ø¯Ø§Ø¯ ØµØ­ÛŒØ­ (...Ù¬âˆ’Û²Ù¬âˆ’Û±Ù¬Û°Ù¬Û±Ù¬Û²Ù¬â€¦)</option>
      <option value="Q">Q â€” Ø§Ø¹Ø¯Ø§Ø¯ Ú¯ÙˆÛŒØ§ (Ù…Ø§Ù†Ù†Ø¯ Ú©Ø³Ø±Ù‡Ø§)</option>
      <option value="I">I â€” Ø§Ø¹Ø¯Ø§Ø¯ Ú¯Ù†Ú¯ (âˆšÛ²ØŒ Ï€ Ùˆâ€¦)</option>
      <option value="R">R â€” Ø§Ø¹Ø¯Ø§Ø¯ Ø­Ù‚ÛŒÙ‚ÛŒ (Ø¨ÛŒâ€ŒÙ¾Ø§ÛŒØ§Ù† Ùˆ Ù¾ÛŒÙˆØ³ØªÙ‡)</option>
    </select>

    <label>Ø´Ø±Ø· Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</label>
    <input id="conditionInput" placeholder="Ù…Ø«Ù„Ø§Ù‹: x â‰¥ 3 ÛŒØ§ x < 5">

    <div class="small">x Ù†Ù…Ø§ÛŒÙ†Ø¯Ù‡Ù” Ø§Ø¹Ø¶Ø§ÛŒ Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ø§Ø³Øª.</div>

    <div style="display:flex;gap:6px;margin-top:12px;">
      <button onclick="makeExpression()">Ù†Ù…Ø§Ø¯ Ø±ÛŒØ§Ø¶ÛŒ</button>
      <button onclick="showMembers()">Ù†Ù…Ø§ÛŒØ´ Ø§Ø¹Ø¶Ø§</button>
      <button onclick="showVenn()">Ù†Ù…ÙˆØ¯Ø§Ø± ÙˆÙ†</button>
      <button onclick="showAxis()">Ù†Ù…Ø§ÛŒØ´ Ù…Ø­ÙˆØ±</button>
    </div>

    <div id="exprBox" class="result-box" style="margin-top:12px;"></div>

    <!-- Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§ -->
    <div style="margin-top:18px;">
      <label>Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§</label>
      <div style="display:flex;gap:8px;">
        <input id="exampleInput" placeholder="Ù…Ø«Ù„Ø§Ù‹: x â‰¥ 3 in N">
        <button onclick="saveExample()">Ø°Ø®ÛŒØ±Ù‡</button>
      </div>

      <div id="examplesList" class="examples"></div>
    </div>

  </div>

  <!-- ğŸ‘‰ Ø³ØªÙˆÙ† Ù†Ù…Ø§ÛŒØ´ -->
  <div class="card vis-area">

    <div class="op-strip" id="opStrip">
      <div class="op">Ã·</div>
      <div class="op">+</div>
      <div class="op">Ã—</div>
      <div class="op">âˆ’</div>
    </div>

    <canvas id="vennCanvas"></canvas>
    <canvas id="axisCanvas"></canvas>

    <div id="membersBox" class="result-box">Ø§ÛŒÙ†Ø¬Ø§ Ø§Ø¹Ø¶Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</div>

  </div>

</main>


<script>
// ğŸŸ¦ Ù†Ø§Ù… Ùˆ Ù¾Ø±ÙˆÙØ§ÛŒÙ„
const user = localStorage.getItem("userName") || "Ú©Ø§Ø±Ø¨Ø±";
document.getElementById("userNameText").innerText = user;
let initials = user.split(" ")[0][0];
if(user.split(" ")[1]) initials += user.split(" ")[1][0];
document.getElementById("avatar").innerText = initials;

// ğŸŸ¦ ØªØ¨Ø¯ÛŒÙ„ Ø´Ø±Ø· ÙØ§Ø±Ø³ÛŒ â†’ Ø±ÛŒØ§Ø¶ÛŒ
function fixCond(c){
  return c.replace(/Ø¨Ø²Ø±Ú¯ØªØ± Ù…Ø³Ø§ÙˆÛŒ|â‰¥/g, ">=")
          .replace(/Ú©ÙˆÚ†Ú©ØªØ± Ù…Ø³Ø§ÙˆÛŒ|â‰¤/g, "<=")
          .replace(/Ø¨Ø²Ø±Ú¯ØªØ±|>/g, ">")
          .replace(/Ú©ÙˆÚ†Ú©ØªØ±|</g, "<")
          .replace(/Ù…Ø³Ø§ÙˆÛŒ|=/g, "=");
}

// ğŸŸ¦ Ù†Ù…Ø§Ø¯ Ø±ÛŒØ§Ø¶ÛŒ
function makeExpression(){
  const set = document.getElementById("knownSet").value;
  const cond = fixCond(document.getElementById("conditionInput").value.trim());
  if(!set || !cond){
    alert("Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ùˆ Ø´Ø±Ø· Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.");
    return;
  }
  document.getElementById("exprBox").innerText = `{ x âˆˆ ${set} | ${cond} }`;
}

// ğŸŸ¦ Ù†Ù…Ø§ÛŒØ´ Ø§Ø¹Ø¶Ø§ (ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÙ‡Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´â€ŒÙ¾Ø°ÛŒØ±)
function showMembers(){
  const set = document.getElementById("knownSet").value;
  const cond = fixCond(document.getElementById("conditionInput").value.trim());
  const box = document.getElementById("membersBox");

  if(set==="N") box.innerText = "{ 1, 2, 3, ... }";
  else if(set==="W") box.innerText = "{ 0, 1, 2, 3, ... }";
  else if(set==="Z") box.innerText = "{ ..., -2, -1, 0, 1, 2, ... }";
  else box.innerText = "Ù‚Ø§Ø¨Ù„ Ù†Ù…Ø§ÛŒØ´ Ù†ÛŒØ³Øª (Ù†Ø§Ù…ØªÙ†Ø§Ù‡ÛŒ ÛŒØ§ ØºÛŒØ± Ù‚Ø§Ø¨Ù„ ØªØ±Ø³ÛŒÙ…)";
}

// ğŸŸ¦ Ù†Ù…ÙˆØ¯Ø§Ø± ÙˆÙ†
function showVenn(){
  const set = document.getElementById("knownSet").value;
  const canvas = document.getElementById("vennCanvas");
  const ctx = canvas.getContext("2d");
  ctx.clearRect(0,0,canvas.width,canvas.height);

  if(!["N","W","Z"].includes(set)){
    ctx.font="20px Tahoma";
    ctx.fillText("Ø§ÛŒÙ† Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ù‚Ø§Ø¨Ù„ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø± Ù†Ù…ÙˆØ¯Ø§Ø± ÙˆÙ† Ù†ÛŒØ³Øª.",20,50);
    return;
  }

  const x = canvas.width/2;
  const y = canvas.height/2;
  const r = 70;

  ctx.beginPath();
  ctx.arc(x-60, y, r, 0, 2*Math.PI);
  ctx.strokeStyle="#1565c0";
  ctx.stroke();

  ctx.beginPath();
  ctx.arc(x+60, y, r, 0, 2*Math.PI);
  ctx.strokeStyle="#ff9800";
  ctx.stroke();
}

// ğŸŸ¦ Ù…Ø­ÙˆØ±
function showAxis(){
  const canvas = document.getElementById("axisCanvas");
  const ctx = canvas.getContext("2d");
  ctx.clearRect(0,0,canvas.width,canvas.height);

  let y = canvas.height/2;
  ctx.lineWidth = 2;

  // Ù…Ø­ÙˆØ±
  ctx.beginPath();
  ctx.moveTo(30,y);
  ctx.lineTo(canvas.width-30,y);
  ctx.stroke();

  // Ø¹Ù„Ø§Ù…Øª Ø¨ÛŒâ€ŒÙ†Ù‡Ø§ÛŒØª
  ctx.font="22px Tahoma";
  ctx.fillText("... ", canvas.width-60, y-10);
  ctx.fillText("... ", 20, y-10);

  // Ø§Ø¹Ø¯Ø§Ø¯ Ù†Ù…ÙˆÙ†Ù‡
  let xStart = 80;
  for(let i=1;i<=5;i++){
    ctx.beginPath();
    ctx.arc(xStart+i*60,y,6,0,2*Math.PI);
    ctx.fill();
    ctx.fillText(i, xStart+i*60-3, y+22);
  }
}

// ğŸŸ¦ Ø°Ø®ÛŒØ±Ù‡ Ù…Ø«Ø§Ù„
function saveExample(){
  let ex = document.getElementById("exampleInput").value.trim();
  if(!ex) return;
  let list = JSON.parse(localStorage.getItem("examples") || "[]");
  list.unshift(ex);
  localStorage.setItem("examples", JSON.stringify(list));
  loadExamples();
}

function loadExamples(){
  let list = JSON.parse(localStorage.getItem("examples") || "[]");
  let box = document.getElementById("examplesList");
  box.innerHTML = list.map(e=>"- "+e).join("<br>");
}
loadExamples();

</script>

</body>
</html>
